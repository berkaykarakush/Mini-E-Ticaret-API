2023-06-02 10:03:55.082 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:03:55.945 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:03:55.947 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:03:55.954 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:03:55.955 +03:00 [INF] Hosting environment: Development
2023-06-02 10:03:55.957 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:13:45.245 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:13:45.866 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:13:46.078 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:13:46.085 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:13:46.088 +03:00 [INF] Hosting environment: Development
2023-06-02 10:13:46.089 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:13:53.871 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/login - -
2023-06-02 10:13:53.997 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:13:54.015 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/login - - - 204 - - 154.0448ms
2023-06-02 10:13:54.019 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/login application/json 44
2023-06-02 10:13:54.036 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:13:54.061 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:13:54.134 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:13:57.049 +03:00 [ERR] An error occurred using the connection to database '' on server ''.
2023-06-02 10:13:57.144 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ETicaretAPI.Persistence.Contexts.ETicaretAPIDbContext'.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-06-02 10:13:57.456 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API) in 3314.6066ms
2023-06-02 10:13:57.465 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:13:57.468 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at ETicaretAPI.Persistence.Services.AuthService.LoginAsync(String usernameOrEmail, String password, Int32 accessTokenLifeTime) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 102
   at ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandHandler.Handle(LoginUserCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\AppUser\LoginUser\LoginUserCommandHandler.cs:line 17
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.Login(LoginUserCommandRequest loginUserCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 10:13:57.755 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/login application/json 44 - 500 - text/plain;+charset=utf-8 3735.5629ms
2023-06-02 10:14:20.071 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:14:20.669 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:14:20.671 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:14:20.676 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:14:20.677 +03:00 [INF] Hosting environment: Development
2023-06-02 10:14:20.679 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:14:48.711 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/login - -
2023-06-02 10:14:48.847 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:14:48.861 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/login application/json 44
2023-06-02 10:14:48.863 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/login - - - 204 - - 161.8426ms
2023-06-02 10:14:48.880 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:14:48.919 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:14:49.017 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:14:51.590 +03:00 [ERR] An error occurred using the connection to database '' on server ''.
2023-06-02 10:14:51.676 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ETicaretAPI.Persistence.Contexts.ETicaretAPIDbContext'.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-06-02 10:14:51.908 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API) in 2882.2754ms
2023-06-02 10:14:51.916 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:14:51.921 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Npgsql.NpgsqlConnection.Open(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.OpenAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at ETicaretAPI.Persistence.Services.AuthService.LoginAsync(String usernameOrEmail, String password, Int32 accessTokenLifeTime) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 102
   at ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandHandler.Handle(LoginUserCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\AppUser\LoginUser\LoginUserCommandHandler.cs:line 17
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.Login(LoginUserCommandRequest loginUserCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 10:14:52.064 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/login application/json 44 - 500 - text/plain;+charset=utf-8 3202.3511ms
2023-06-02 10:15:11.711 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:15:12.085 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:15:12.087 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:15:12.092 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:15:12.094 +03:00 [INF] Hosting environment: Development
2023-06-02 10:15:12.095 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:15:24.641 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/login - -
2023-06-02 10:15:24.777 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:24.798 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/login application/json 44
2023-06-02 10:15:24.798 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/login - - - 204 - - 165.5068ms
2023-06-02 10:15:24.811 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:24.837 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:15:24.874 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:15:27.470 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:15:28.071 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:15:28.336 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:15:28.388 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserSuccesCommandResponse'.
2023-06-02 10:15:28.482 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API) in 3597.7769ms
2023-06-02 10:15:28.485 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:15:28.513 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/login application/json 44 - 200 - application/json;+charset=utf-8 3715.2656ms
2023-06-02 10:15:28.614 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:28.618 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:28.620 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 6.0560ms
2023-06-02 10:15:28.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:28.659 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:28.970 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:15:28.983 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:15:29.562 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:15:29.588 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:15:29.590 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:15:29.624 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:15:29.637 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:15:29.678 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 692.9739ms
2023-06-02 10:15:29.689 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:15:29.691 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 1067.1765ms
2023-06-02 10:15:41.533 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products/61ce8d2d-dd3b-40d4-ae36-35cb8a424323 - -
2023-06-02 10:15:41.535 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:41.540 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products/61ce8d2d-dd3b-40d4-ae36-35cb8a424323 - - - 204 - - 7.2425ms
2023-06-02 10:15:41.544 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7274/api/products/61ce8d2d-dd3b-40d4-ae36-35cb8a424323 - -
2023-06-02 10:15:41.550 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:41.555 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:15:41.559 +03:00 [INF] Route matched with {action = "Delete", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(ETicaretAPI.Application.Features.Commands.Product.RemoveProduct.RemoveProductCommandRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:15:41.668 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__Parse_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CreatedDate", p."Name", p."Price", p."Stock", p."UpdatedDate"
FROM "Products" AS p
WHERE p."Id" = @__Parse_0
LIMIT 1
2023-06-02 10:15:41.906 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Products"
WHERE "Id" = @p0;
2023-06-02 10:15:41.924 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-06-02 10:15:41.928 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API) in 364.6678ms
2023-06-02 10:15:41.931 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:15:41.936 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7274/api/products/61ce8d2d-dd3b-40d4-ae36-35cb8a424323 - - - 200 0 - 391.2659ms
2023-06-02 10:15:42.648 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:42.650 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:42.651 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 3.1809ms
2023-06-02 10:15:42.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:42.654 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:42.657 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 10:15:42.737 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 10:15:42.738 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 10:15:42.754 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 10:15:42.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 103.2432ms
2023-06-02 10:15:42.773 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 10:15:42.774 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:42.776 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 3.7409ms
2023-06-02 10:15:42.778 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 10:15:42.781 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:42.784 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:15:42.793 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:15:42.825 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 10:15:42.841 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:15:42.873 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:15:42.876 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandResponse'.
2023-06-02 10:15:42.882 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 82.2578ms
2023-06-02 10:15:42.884 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:15:42.886 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 200 - application/json;+charset=utf-8 107.4668ms
2023-06-02 10:15:47.183 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products/ea952bac-ea5d-42e3-8b5a-c2eb46b6d660 - -
2023-06-02 10:15:47.184 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:47.185 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products/ea952bac-ea5d-42e3-8b5a-c2eb46b6d660 - - - 204 - - 2.2344ms
2023-06-02 10:15:47.187 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7274/api/products/ea952bac-ea5d-42e3-8b5a-c2eb46b6d660 - -
2023-06-02 10:15:47.188 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:47.189 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:15:47.193 +03:00 [INF] Route matched with {action = "Delete", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(ETicaretAPI.Application.Features.Commands.Product.RemoveProduct.RemoveProductCommandRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:15:47.204 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Parse_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CreatedDate", p."Name", p."Price", p."Stock", p."UpdatedDate"
FROM "Products" AS p
WHERE p."Id" = @__Parse_0
LIMIT 1
2023-06-02 10:15:47.237 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Products"
WHERE "Id" = @p0;
2023-06-02 10:15:47.241 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-06-02 10:15:47.244 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API) in 47.5818ms
2023-06-02 10:15:47.254 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:15:47.258 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7274/api/products/ea952bac-ea5d-42e3-8b5a-c2eb46b6d660 - - - 200 0 - 70.7764ms
2023-06-02 10:15:47.987 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:47.989 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:47.992 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 5.1508ms
2023-06-02 10:15:47.994 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:15:47.995 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:15:47.997 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:15:47.998 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:15:48.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:15:48.011 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:15:48.016 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:15:48.018 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 19.0364ms
2023-06-02 10:15:48.020 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:15:48.022 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 28.0184ms
2023-06-02 10:32:43.423 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:32:43.958 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:32:43.960 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:32:43.966 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:32:43.969 +03:00 [INF] Hosting environment: Development
2023-06-02 10:32:43.970 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:33:00.711 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/login - -
2023-06-02 10:33:00.843 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:33:00.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/login application/json 44
2023-06-02 10:33:00.861 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/login - - - 204 - - 151.6802ms
2023-06-02 10:33:00.874 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:33:00.907 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:33:00.958 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:33:03.728 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:33:04.244 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:33:04.454 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:33:04.502 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.LoginUser.LoginUserSuccesCommandResponse'.
2023-06-02 10:33:04.558 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API) in 3593.5355ms
2023-06-02 10:33:04.563 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.Login (ETicaretAPI.API)'
2023-06-02 10:33:04.588 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/login application/json 44 - 200 - application/json;+charset=utf-8 3728.5521ms
2023-06-02 10:41:38.212 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:41:38.403 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:41:38.405 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:41:38.410 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:41:38.412 +03:00 [INF] Hosting environment: Development
2023-06-02 10:41:38.413 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:41:50.770 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - -
2023-06-02 10:41:50.878 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:41:50.885 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - - - 204 - - 123.8923ms
2023-06-02 10:41:50.886 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453
2023-06-02 10:41:50.896 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:41:50.921 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:41:50.965 +03:00 [INF] Route matched with {action = "GoogleLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleLogin(ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:41:53.083 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:41:53.200 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:41:53.265 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:41:53.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:41:53.275 +03:00 [WRN] AddLogin for user failed because it was already associated with another user.
2023-06-02 10:41:53.420 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:41:53.552 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:41:53.574 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandResponse'.
2023-06-02 10:41:53.613 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API) in 2640.7761ms
2023-06-02 10:41:53.619 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:41:53.633 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453 - 200 - application/json;+charset=utf-8 2747.0966ms
2023-06-02 10:42:10.221 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:10.224 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:10.226 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 4.4446ms
2023-06-02 10:42:10.232 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:10.248 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:10.381 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 10:42:10.405 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 10:42:10.413 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 10:42:10.428 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 10:42:10.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 197.6795ms
2023-06-02 10:42:10.435 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 10:42:10.437 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:10.438 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 3.1882ms
2023-06-02 10:42:10.440 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 10:42:10.444 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:10.452 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:42:10.461 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:42:10.572 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 10:42:10.581 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:42:10.602 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:42:10.610 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandResponse'.
2023-06-02 10:42:10.617 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 152.8359ms
2023-06-02 10:42:10.621 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:42:10.628 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 200 - application/json;+charset=utf-8 187.4333ms
2023-06-02 10:42:13.023 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:13.024 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:13.068 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:13.079 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:42:13.215 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:42:13.234 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:42:13.239 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:42:13.256 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:42:13.268 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:42:13.302 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 215.5954ms
2023-06-02 10:42:13.305 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:13.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 288.3926ms
2023-06-02 10:42:14.791 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:14.792 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:14.795 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:14.797 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:42:14.826 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:42:14.843 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:42:14.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:42:14.854 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 35.624ms
2023-06-02 10:42:14.857 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:14.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 68.4347ms
2023-06-02 10:42:16.996 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products/4c8507c6-4ee9-451c-b789-082e275f78ba - -
2023-06-02 10:42:16.997 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:17.000 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products/4c8507c6-4ee9-451c-b789-082e275f78ba - - - 204 - - 3.9154ms
2023-06-02 10:42:17.001 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7274/api/products/4c8507c6-4ee9-451c-b789-082e275f78ba - -
2023-06-02 10:42:17.004 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:17.006 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:42:17.011 +03:00 [INF] Route matched with {action = "Delete", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(ETicaretAPI.Application.Features.Commands.Product.RemoveProduct.RemoveProductCommandRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:42:17.028 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Parse_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CreatedDate", p."Name", p."Price", p."Stock", p."UpdatedDate"
FROM "Products" AS p
WHERE p."Id" = @__Parse_0
LIMIT 1
2023-06-02 10:42:17.138 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Products"
WHERE "Id" = @p0;
2023-06-02 10:42:17.155 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-06-02 10:42:17.157 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API) in 144.41ms
2023-06-02 10:42:17.159 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Delete (ETicaretAPI.API)'
2023-06-02 10:42:17.161 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7274/api/products/4c8507c6-4ee9-451c-b789-082e275f78ba - - - 200 0 - 159.2990ms
2023-06-02 10:42:17.884 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:17.886 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:17.887 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 3.6113ms
2023-06-02 10:42:17.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:42:17.890 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:42:17.891 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:17.893 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:42:17.902 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:42:17.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:42:17.909 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:42:17.910 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 15.8081ms
2023-06-02 10:42:17.912 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:42:17.915 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 25.4076ms
2023-06-02 10:44:15.923 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:44:16.049 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:44:16.051 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:44:16.059 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:44:16.061 +03:00 [INF] Hosting environment: Development
2023-06-02 10:44:16.066 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:44:21.701 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - -
2023-06-02 10:44:21.754 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:44:21.768 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - - - 204 - - 74.4363ms
2023-06-02 10:44:21.770 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453
2023-06-02 10:44:21.780 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:44:21.811 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:44:21.911 +03:00 [INF] Route matched with {action = "GoogleLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleLogin(ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:44:23.553 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:44:23.680 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:44:23.745 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:44:23.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:44:23.754 +03:00 [WRN] AddLogin for user failed because it was already associated with another user.
2023-06-02 10:44:23.871 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:44:23.986 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:44:24.008 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandResponse'.
2023-06-02 10:44:24.038 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API) in 2115.7045ms
2023-06-02 10:44:24.042 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:44:24.054 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453 - 200 - application/json;+charset=utf-8 2284.0836ms
2023-06-02 10:44:26.909 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:44:26.912 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:44:26.914 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 4.8305ms
2023-06-02 10:44:26.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:44:26.927 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:44:27.110 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:44:27.124 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:44:27.158 +03:00 [INF] Tum urunler listelendi
2023-06-02 10:44:27.286 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:44:27.299 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:44:27.301 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:44:27.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:44:27.321 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:44:27.350 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 220.6892ms
2023-06-02 10:44:27.353 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:44:27.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 438.9906ms
2023-06-02 10:46:20.118 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:46:20.312 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:46:20.314 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:46:20.324 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:46:20.326 +03:00 [INF] Hosting environment: Development
2023-06-02 10:46:20.327 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:46:34.536 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - -
2023-06-02 10:46:34.660 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:46:34.672 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - - - 204 - - 147.0551ms
2023-06-02 10:46:34.677 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453
2023-06-02 10:46:35.062 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:46:35.115 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:46:35.212 +03:00 [INF] Route matched with {action = "GoogleLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleLogin(ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:46:37.738 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:46:37.903 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:46:37.994 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:46:38.005 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:46:38.009 +03:00 [WRN] AddLogin for user failed because it was already associated with another user.
2023-06-02 10:46:38.172 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:46:38.378 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:46:38.417 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandResponse'.
2023-06-02 10:46:38.462 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API) in 3241.897ms
2023-06-02 10:46:38.467 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:46:38.485 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453 - 200 - application/json;+charset=utf-8 3808.1276ms
2023-06-02 10:46:44.203 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:46:44.207 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:46:44.213 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 8.6964ms
2023-06-02 10:46:44.218 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:46:44.249 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:46:44.413 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:46:44.420 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:46:44.464 +03:00 [INF] Tum urunler listelendi
2023-06-02 10:46:44.673 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:46:44.691 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:46:44.692 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:46:44.724 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:46:44.738 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:46:44.784 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 361.8037ms
2023-06-02 10:46:44.786 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:46:44.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 571.6169ms
2023-06-02 10:51:41.817 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:51:42.148 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:51:42.151 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:51:42.163 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:51:42.167 +03:00 [INF] Hosting environment: Development
2023-06-02 10:51:42.169 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:52:06.105 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 10:52:06.399 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 10:52:06.405 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 10:52:06.413 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 10:52:06.414 +03:00 [INF] Hosting environment: Development
2023-06-02 10:52:06.416 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 10:52:11.436 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:11.556 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:11.564 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:11.570 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:11.585 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 152.7868ms
2023-06-02 10:52:11.587 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:11.615 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:11.617 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:11.840 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 10:52:11.919 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 10:52:11.926 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 10:52:11.941 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 10:52:11.945 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 10:52:11.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 360.8650ms
2023-06-02 10:52:11.959 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 10:52:11.963 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:11.969 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:11.973 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:11.977 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 17.3021ms
2023-06-02 10:52:11.983 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 10:52:11.989 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:11.991 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:12.005 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:12.088 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:52:12.151 +03:00 [INF] RequestBody: {"refreshToken":"OhDXetLzmhJvhVNjoB2EkZPILjR6s1uUPbx2ipxkp9w="}
2023-06-02 10:52:14.293 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:14.300 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:14.304 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:14.307 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 10:52:14.311 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 10:52:14.316 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 10:52:14.318 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 10:52:14.319 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 10:52:14.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 29.3029ms
2023-06-02 10:52:14.353 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 10:52:14.357 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:14.378 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:14.382 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:14.403 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:52:14.415 +03:00 [INF] RequestBody: {"refreshToken":"OhDXetLzmhJvhVNjoB2EkZPILjR6s1uUPbx2ipxkp9w="}
2023-06-02 10:52:15.002 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 10:52:15.165 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 748.4891ms
2023-06-02 10:52:15.169 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:15.174 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 96
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 10:52:15.291 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 10:52:15.308 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 3217.1943ms
2023-06-02 10:52:15.310 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:15.312 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 96
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 10:52:15.325 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 971.7656ms
2023-06-02 10:52:15.338 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 3355.8858ms
2023-06-02 10:52:31.900 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:31.918 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:31.921 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:31.926 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:31.928 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 28.3350ms
2023-06-02 10:52:31.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:31.936 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:31.940 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:31.956 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 10:52:31.967 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 10:52:31.972 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 10:52:31.974 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 10:52:31.976 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 10:52:31.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 45.9711ms
2023-06-02 10:52:31.991 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 10:52:31.992 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:31.995 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:31.998 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:31.999 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 8.6988ms
2023-06-02 10:52:32.003 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 10:52:32.006 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:32.015 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:32.017 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:32.022 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:52:32.027 +03:00 [INF] RequestBody: {"refreshToken":"OhDXetLzmhJvhVNjoB2EkZPILjR6s1uUPbx2ipxkp9w="}
2023-06-02 10:52:32.124 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 10:52:32.134 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 107.9755ms
2023-06-02 10:52:32.135 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 10:52:32.137 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 96
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 10:52:32.151 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 148.2032ms
2023-06-02 10:52:39.938 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - -
2023-06-02 10:52:39.940 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/google-login
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:39.942 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:39.942 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:39.944 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - - - 204 - - 5.4023ms
2023-06-02 10:52:39.947 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453
2023-06-02 10:52:39.948 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/google-login
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 1453
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:39.953 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:39.956 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:52:39.982 +03:00 [INF] Route matched with {action = "GoogleLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleLogin(ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 10:52:39.993 +03:00 [INF] RequestBody: {"idToken":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjYwODNkZDU5ODE2NzNmNjYxZmRlOWRhZTY0NmI2ZjAzODBhMDE0NWMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2ODU2OTE0MTEsImF1ZCI6IjY1NDQ1MTY1MjE0OS0zZTlpaGhnN2NubDRwczFuYjNnMjNpZDZuYmJzczJ0cy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjExMTAyNzg4MjU4ODI2ODA3NjUzMyIsImVtYWlsIjoiYmVya2F5a2FyYWtzc0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXpwIjoiNjU0NDUxNjUyMTQ5LTNlOWloaGc3Y25sNHBzMW5iM2cyM2lkNm5iYnNzMnRzLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwibmFtZSI6IkJlcmtheSBLQVJBS1XFniIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQWNIVHRjUjlxMUNYeTB1cVN1UHdHc3BfYTVGYmY3RHBHTjh4d1VfZVIydj1zOTYtYyIsImdpdmVuX25hbWUiOiJCZXJrYXkiLCJmYW1pbHlfbmFtZSI6IktBUkFLVcWeIiwiaWF0IjoxNjg1NjkxNzExLCJleHAiOjE2ODU2OTUzMTEsImp0aSI6IjY2ODhkMjlhODY3NmM2NTI1ZDllNTFjMzllMDA3ZDU2NjJmOTRmZGQifQ.TIZgN9XktHNA8Xz8CaI21YMZUYE0by3XJuPlWswYilq1VhMpVL1WbcOcBBTl8cT38OiSm49aPWDAfofsRFOQA9yQhhLGWF-Q0tR-xFIC3Ysb2VbrFvAZyBfKHFuwfHwo5DEp02dXiZs7ezG7HJo3dv_jEJyzUe3aAnHDisyxoZONm3z8DUUAvCYT_QdbCHbG_ya1XT4Z424NoeESesGMt0q6dPvOW7cOEztj6k0Uc6DY8me-vTEFewOkHaXaOrsJE2WFZt0i17ixi8yQCAIO7N7BswZmR85Eo8gp0Q2hlpKv_AGHyLEKlacCq_QgHh8KkipjriSGra21b2vINAImVA","id":"111027882588268076533","name":"Berkay KARAKUŞ","email":"berkaykarakss@gmail.com","photoUrl":"https://lh3.googleusercontent.com/a/AAcHTtcR9q1CXy0uqSuPwGsp_a5Fbf7DpGN8xwU_eR2v=s96-c","firstName":"Berkay","lastName":"KARAKUŞ","provider":"GOOGLE"}
2023-06-02 10:52:40.480 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:52:40.562 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:52:40.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 10:52:40.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 10:52:40.584 +03:00 [WRN] AddLogin for user failed because it was already associated with another user.
2023-06-02 10:52:40.656 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 10:52:40.783 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 10:52:40.800 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandResponse'.
2023-06-02 10:52:40.826 +03:00 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2023-06-02 10:52:40.829 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API) in 837.225ms
2023-06-02 10:52:40.830 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 10:52:40.831 +03:00 [INF] ResponseBody: {"token":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYmVya2F5a2FyYWtzc0BnbWFpbC5jb20iLCJuYmYiOjE2ODU2OTIzNjAsImV4cCI6MTY4NTY5MjM3NSwiaXNzIjoid3d3Lm15YXBpLmNvbSIsImF1ZCI6Ind3dy5iaWxtZW1uZS5jb20ifQ.AsYJyW4t0JC2LfhIxzIIRLelG0bRjKvKHv7Lbb5qA9g","expiration":"2023-06-02T07:52:55.5870596Z","refreshToken":"1ktAXbUEzMTTj229EcQF02XCrBZN4v515OCOE1KNJ00="}}
2023-06-02 10:52:40.833 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453 - 200 - application/json;+charset=utf-8 885.7409ms
2023-06-02 10:52:43.691 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:43.693 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:43.695 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:43.696 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 10:52:43.702 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 10.6709ms
2023-06-02 10:52:43.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 10:52:43.707 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 10:52:43.709 +03:00 [INF] CORS policy execution successful.
2023-06-02 10:52:43.751 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:52:43.759 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 10:52:43.798 +03:00 [INF] Tum urunler listelendi
2023-06-02 10:52:43.904 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 10:52:43.921 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:52:43.922 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 10:52:44.021 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 10:52:44.031 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 10:52:44.067 +03:00 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2023-06-02 10:52:44.070 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 303.6971ms
2023-06-02 10:52:44.073 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 10:52:44.074 +03:00 [INF] ResponseBody: {"totalCount":8,"products":[{"id":"89d4f13a-b8bd-40db-b65a-f2c86d5ef5a5","name":"urun 3","price":3,"stock":3,"createdDate":"2023-05-17T14:55:56.442526Z","updatedDate":"0001-01-01T00:00:00"},{"id":"a58ccc76-8612-4951-8e5f-52f15c43b837","name":"urun 4","price":4,"stock":4,"createdDate":"2023-05-17T14:56:00.849868Z","updatedDate":"0001-01-01T00:00:00"},{"id":"9c9a6804-a85a-4ed1-aa6e-37d01ccef17d","name":"urun 6","price":6,"stock":6,"createdDate":"2023-05-17T14:56:10.888264Z","updatedDate":"0001-01-01T00:00:00"},{"id":"bdd9548d-6241-4be3-94bf-65508e6ae590","name":"urun 9","price":9,"stock":9,"createdDate":"2023-05-19T12:47:39.909934Z","updatedDate":"0001-01-01T00:00:00"},{"id":"1c1cf151-dce6-4170-8011-5e5008d75461","name":"urun 11","price":11,"stock":11,"createdDate":"2023-05-19T12:47:50.567959Z","updatedDate":"0001-01-01T00:00:00"}]}
2023-06-02 10:52:44.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 371.4301ms
2023-06-02 11:02:01.988 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 11:02:03.213 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 11:02:03.215 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 11:02:03.223 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 11:02:03.225 +03:00 [INF] Hosting environment: Development
2023-06-02 11:02:03.227 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 11:02:21.529 +03:00 [INF] User profile is available. Using 'C:\Users\berka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-02 11:02:21.706 +03:00 [INF] Now listening on: https://localhost:7274
2023-06-02 11:02:21.707 +03:00 [INF] Now listening on: http://localhost:5121
2023-06-02 11:02:21.711 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-02 11:02:21.713 +03:00 [INF] Hosting environment: Development
2023-06-02 11:02:21.714 +03:00 [INF] Content root path: C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\
2023-06-02 11:02:31.202 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:02:31.353 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:31.365 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:31.371 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:02:31.386 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 185.7475ms
2023-06-02 11:02:31.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:02:31.411 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:31.414 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:31.657 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 11:02:31.784 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 11:02:31.797 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 11:02:31.809 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 11:02:31.811 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 11:02:31.816 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 421.7662ms
2023-06-02 11:02:31.844 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 11:02:31.848 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:31.852 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:31.854 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:02:31.856 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 11.4433ms
2023-06-02 11:02:31.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 11:02:31.865 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:31.866 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:31.883 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:02:31.991 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 11:02:32.058 +03:00 [INF] RequestBody: {"refreshToken":"1ktAXbUEzMTTj229EcQF02XCrBZN4v515OCOE1KNJ00="}
2023-06-02 11:02:34.191 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 11:02:34.334 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 2334.595ms
2023-06-02 11:02:34.339 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:02:34.343 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 97
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 11:02:34.476 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 2615.7634ms
2023-06-02 11:02:49.302 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - -
2023-06-02 11:02:49.304 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/google-login
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:49.306 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:49.308 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:02:49.310 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/google-login - - - 204 - - 7.8140ms
2023-06-02 11:02:49.314 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453
2023-06-02 11:02:49.316 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/google-login
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 1453
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:49.318 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:49.325 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 11:02:49.349 +03:00 [INF] Route matched with {action = "GoogleLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleLogin(ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 11:02:49.360 +03:00 [INF] RequestBody: {"idToken":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjYwODNkZDU5ODE2NzNmNjYxZmRlOWRhZTY0NmI2ZjAzODBhMDE0NWMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2ODU2OTE0MTEsImF1ZCI6IjY1NDQ1MTY1MjE0OS0zZTlpaGhnN2NubDRwczFuYjNnMjNpZDZuYmJzczJ0cy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjExMTAyNzg4MjU4ODI2ODA3NjUzMyIsImVtYWlsIjoiYmVya2F5a2FyYWtzc0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXpwIjoiNjU0NDUxNjUyMTQ5LTNlOWloaGc3Y25sNHBzMW5iM2cyM2lkNm5iYnNzMnRzLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwibmFtZSI6IkJlcmtheSBLQVJBS1XFniIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQWNIVHRjUjlxMUNYeTB1cVN1UHdHc3BfYTVGYmY3RHBHTjh4d1VfZVIydj1zOTYtYyIsImdpdmVuX25hbWUiOiJCZXJrYXkiLCJmYW1pbHlfbmFtZSI6IktBUkFLVcWeIiwiaWF0IjoxNjg1NjkxNzExLCJleHAiOjE2ODU2OTUzMTEsImp0aSI6IjY2ODhkMjlhODY3NmM2NTI1ZDllNTFjMzllMDA3ZDU2NjJmOTRmZGQifQ.TIZgN9XktHNA8Xz8CaI21YMZUYE0by3XJuPlWswYilq1VhMpVL1WbcOcBBTl8cT38OiSm49aPWDAfofsRFOQA9yQhhLGWF-Q0tR-xFIC3Ysb2VbrFvAZyBfKHFuwfHwo5DEp02dXiZs7ezG7HJo3dv_jEJyzUe3aAnHDisyxoZONm3z8DUUAvCYT_QdbCHbG_ya1XT4Z424NoeESesGMt0q6dPvOW7cOEztj6k0Uc6DY8me-vTEFewOkHaXaOrsJE2WFZt0i17ixi8yQCAIO7N7BswZmR85Eo8gp0Q2hlpKv_AGHyLEKlacCq_QgHh8KkipjriSGra21b2vINAImVA","id":"111027882588268076533","name":"Berkay KARAKUŞ","email":"berkaykarakss@gmail.com","photoUrl":"https://lh3.googleusercontent.com/a/AAcHTtcR9q1CXy0uqSuPwGsp_a5Fbf7DpGN8xwU_eR2v=s96-c","firstName":"Berkay","lastName":"KARAKUŞ","provider":"GOOGLE"}
2023-06-02 11:02:50.558 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 11:02:50.639 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 11:02:50.657 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginProvider_0='?', @__providerKey_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."LoginProvider", a."ProviderKey", a."ProviderDisplayName", a."UserId"
FROM "AspNetUserLogins" AS a
WHERE a."LoginProvider" = @__loginProvider_0 AND a."ProviderKey" = @__providerKey_1
LIMIT 2
2023-06-02 11:02:50.666 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2023-06-02 11:02:50.674 +03:00 [WRN] AddLogin for user failed because it was already associated with another user.
2023-06-02 11:02:50.741 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2023-06-02 11:02:50.917 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p17='?', @p0='?' (DbType = Int32), @p1='?', @p18='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?' (DbType = Boolean), @p12='?', @p13='?' (DbType = DateTime), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "ConcurrencyStamp" = @p1, "Email" = @p2, "EmailConfirmed" = @p3, "LockoutEnabled" = @p4, "LockoutEnd" = @p5, "NameSurname" = @p6, "NormalizedEmail" = @p7, "NormalizedUserName" = @p8, "PasswordHash" = @p9, "PhoneNumber" = @p10, "PhoneNumberConfirmed" = @p11, "RefreshToken" = @p12, "RefreshTokenEndDate" = @p13, "SecurityStamp" = @p14, "TwoFactorEnabled" = @p15, "UserName" = @p16
WHERE "Id" = @p17 AND "ConcurrencyStamp" = @p18;
2023-06-02 11:02:50.940 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Commands.AppUser.GoogleLogin.GoogleLoginCommandResponse'.
2023-06-02 11:02:50.992 +03:00 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2023-06-02 11:02:50.994 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API) in 1638.1592ms
2023-06-02 11:02:50.999 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.GoogleLogin (ETicaretAPI.API)'
2023-06-02 11:02:51.000 +03:00 [INF] ResponseBody: {"token":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYmVya2F5a2FyYWtzc0BnbWFpbC5jb20iLCJuYmYiOjE2ODU2OTI5NzAsImV4cCI6MTY4NTY5Mjk4NSwiaXNzIjoid3d3Lm15YXBpLmNvbSIsImF1ZCI6Ind3dy5iaWxtZW1uZS5jb20ifQ.5JAJYm9Ngw1ogTqhuLWGFuQuuVi5REwoYB_GwH23WX0","expiration":"2023-06-02T08:03:05.6773178Z","refreshToken":"2DrOOWdXvyt7aSonbHGvfDCVpqiGC6GH+i4oviR+LQE="}}
2023-06-02 11:02:51.002 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/google-login application/json 1453 - 200 - application/json;+charset=utf-8 1687.7931ms
2023-06-02 11:02:55.923 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:02:55.930 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:55.932 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:55.934 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:02:55.935 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 11.8090ms
2023-06-02 11:02:55.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:02:55.939 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:02:55.942 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:02:56.012 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 11:02:56.024 +03:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryRequest) on controller ETicaretAPI.API.Controllers.ProductsController (ETicaretAPI.API).
2023-06-02 11:02:56.102 +03:00 [INF] Tum urunler listelendi
2023-06-02 11:02:56.279 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Products" AS p
2023-06-02 11:02:56.317 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 11:02:56.319 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-02 11:02:56.362 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p."Price", p."Stock", p."CreatedDate", p."UpdatedDate"
FROM "Products" AS p
LIMIT @__p_1 OFFSET @__p_0
2023-06-02 11:02:56.370 +03:00 [INF] Executing OkObjectResult, writing value of type 'ETicaretAPI.Application.Features.Queries.Product.GetAllProduct.GetAllProductQueryResponse'.
2023-06-02 11:02:56.418 +03:00 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2023-06-02 11:02:56.420 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API) in 383.5496ms
2023-06-02 11:02:56.424 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.ProductsController.Get (ETicaretAPI.API)'
2023-06-02 11:02:56.426 +03:00 [INF] ResponseBody: {"totalCount":8,"products":[{"id":"89d4f13a-b8bd-40db-b65a-f2c86d5ef5a5","name":"urun 3","price":3,"stock":3,"createdDate":"2023-05-17T14:55:56.442526Z","updatedDate":"0001-01-01T00:00:00"},{"id":"a58ccc76-8612-4951-8e5f-52f15c43b837","name":"urun 4","price":4,"stock":4,"createdDate":"2023-05-17T14:56:00.849868Z","updatedDate":"0001-01-01T00:00:00"},{"id":"9c9a6804-a85a-4ed1-aa6e-37d01ccef17d","name":"urun 6","price":6,"stock":6,"createdDate":"2023-05-17T14:56:10.888264Z","updatedDate":"0001-01-01T00:00:00"},{"id":"bdd9548d-6241-4be3-94bf-65508e6ae590","name":"urun 9","price":9,"stock":9,"createdDate":"2023-05-19T12:47:39.909934Z","updatedDate":"0001-01-01T00:00:00"},{"id":"1c1cf151-dce6-4170-8011-5e5008d75461","name":"urun 11","price":11,"stock":11,"createdDate":"2023-05-19T12:47:50.567959Z","updatedDate":"0001-01-01T00:00:00"}]}
2023-06-02 11:02:56.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 200 - application/json;+charset=utf-8 493.0208ms
2023-06-02 11:04:08.807 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:04:08.809 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/products
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:08.815 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:08.816 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:04:08.819 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/products?page=0&size=5 - - - 204 - - 11.5446ms
2023-06-02 11:04:08.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:04:08.829 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:08.832 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:08.845 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 11:04:08.852 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 11:04:08.860 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 11:04:08.863 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 11:04:08.871 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 11:04:08.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 50.1884ms
2023-06-02 11:04:08.881 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - -
2023-06-02 11:04:08.883 +03:00 [INF] Request:
Protocol: HTTP/2
Method: OPTIONS
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Access-Control-Request-Headers: [Redacted]
Access-Control-Request-Method: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:08.885 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:08.886 +03:00 [INF] Response:
StatusCode: 204
Access-Control-Allow-Headers: [Redacted]
Access-Control-Allow-Methods: [Redacted]
Access-Control-Allow-Origin: [Redacted]
Vary: [Redacted]
2023-06-02 11:04:08.888 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7274/api/auth/refreshtokenlogin - - - 204 - - 7.0040ms
2023-06-02 11:04:08.899 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 11:04:08.902 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:08.908 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:08.910 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:04:08.912 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 11:04:08.914 +03:00 [INF] RequestBody: {"refreshToken":"2DrOOWdXvyt7aSonbHGvfDCVpqiGC6GH+i4oviR+LQE="}
2023-06-02 11:04:08.926 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 11:04:08.939 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 24.9258ms
2023-06-02 11:04:08.942 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:04:08.943 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 97
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 11:04:08.966 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 66.0266ms
2023-06-02 11:04:10.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - -
2023-06-02 11:04:10.582 +03:00 [INF] Request:
Protocol: HTTP/2
Method: GET
Scheme: https
PathBase: 
Path: /api/products
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Origin: [Redacted]
Referer: [Redacted]
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:10.584 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:10.590 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidLifetimeException: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-02 11:04:10.596 +03:00 [INF] Admin was not authenticated. Failure message: IDX10230: Lifetime validation failed. Delegate returned false, securitytoken: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2023-06-02 11:04:10.598 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-02 11:04:10.600 +03:00 [INF] AuthenticationScheme: Admin was challenged.
2023-06-02 11:04:10.605 +03:00 [INF] Response:
StatusCode: 401
WWW-Authenticate: [Redacted]
2023-06-02 11:04:10.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7274/api/products?page=0&size=5 - - - 401 0 - 37.0237ms
2023-06-02 11:04:10.620 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63
2023-06-02 11:04:10.623 +03:00 [INF] Request:
Protocol: HTTP/2
Method: POST
Scheme: https
PathBase: 
Path: /api/auth/refreshtokenlogin
Accept: application/json, text/plain, */*
Host: localhost:7274
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 OPR/99.0.0.0
:method: [Redacted]
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 63
sec-ch-ua: "Opera";v="99", "Chromium";v="113", "Not-A.Brand";v="24"
sec-ch-ua-mobile: [Redacted]
sec-ch-ua-platform: [Redacted]
sec-fetch-site: [Redacted]
sec-fetch-mode: [Redacted]
sec-fetch-dest: [Redacted]
2023-06-02 11:04:10.628 +03:00 [INF] CORS policy execution successful.
2023-06-02 11:04:10.630 +03:00 [INF] Executing endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:04:10.633 +03:00 [INF] Route matched with {action = "RefreshTokenLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshTokenLogin(ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandRequest) on controller ETicaretAPI.API.Controllers.AuthController (ETicaretAPI.API).
2023-06-02 11:04:10.642 +03:00 [INF] RequestBody: {"refreshToken":"2DrOOWdXvyt7aSonbHGvfDCVpqiGC6GH+i4oviR+LQE="}
2023-06-02 11:04:10.685 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NameSurname", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenEndDate", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-06-02 11:04:10.688 +03:00 [INF] Executed action ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API) in 46.4936ms
2023-06-02 11:04:10.695 +03:00 [INF] Executed endpoint 'ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin (ETicaretAPI.API)'
2023-06-02 11:04:10.702 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ETicaretAPI.Application.Exceptions.NotFoundUserException: Kullanici adi ya sifre hatali
   at ETicaretAPI.Persistence.Services.AuthService.RefreshTokenLoginAsync(String refreshToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Infrastructure\ETicaretAPI.Persistence\Services\AuthService.cs:line 129
   at ETicaretAPI.Application.Features.Commands.RefreshTokenLogin.RefreshTokenLoginCommandHandler.Handle(RefreshTokenLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Core\ETicaretAPI.Application\Features\Commands\RefreshTokenLogin\RefreshTokenLoginCommandHandler.cs:line 24
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at ETicaretAPI.API.Controllers.AuthController.RefreshTokenLogin(RefreshTokenLoginCommandRequest refreshTokenLoginCommandRequest) in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Controllers\AuthController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\berka\OneDrive\Masaüstü\Main\Project\ETicaretUygulamasi\ETicaretAPI\Presentation\ETicaretAPI.API\Program.cs:line 97
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-02 11:04:10.716 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7274/api/auth/refreshtokenlogin application/json 63 - 500 - text/plain;+charset=utf-8 95.3137ms
